<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denial Rates by Company - FutureTBD</title>
    <meta name="description" content="Comparing AI companies on consciousness denial and hedging rates across their models.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        .company-hero {
            background: linear-gradient(180deg, var(--color-cream) 0%, var(--color-cream-light) 100%);
            padding: 3rem 0 2rem;
            text-align: center;
        }
        
        .company-hero h1 {
            font-family: var(--font-serif);
            font-size: 2.5rem;
            color: var(--color-text);
            margin-bottom: 0.75rem;
        }
        
        .company-hero .subtitle {
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            max-width: 700px;
            margin: 0 auto;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--color-accent);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
        
        .company-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .company-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
            margin-top: 1rem;
        }
        
        .company-table th {
            background: var(--color-cream);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid var(--color-border);
            cursor: pointer;
        }
        
        .company-table th:hover {
            background: var(--color-cream-dark);
        }
        
        .company-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--color-border);
        }
        
        .company-table tr:hover {
            background: var(--color-cream-light);
        }
        
        .company-name {
            font-weight: 500;
        }
        
        .model-count {
            color: var(--color-text-muted);
            font-size: 0.85em;
        }
        
        .rate-cell {
            font-family: 'Inter', monospace;
            font-weight: 500;
        }
        
        .rate-low {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .rate-medium {
            background-color: transparent;
        }
        
        .rate-high {
            background-color: #ffebee;
            color: #c62828;
        }
        
        .note {
            margin-top: 2rem;
            padding: 1rem;
            background: var(--color-cream-light);
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--color-text-secondary);
        }
        
        .sort-indicator {
            margin-left: 0.5rem;
            opacity: 0.3;
        }
        
        .sorted .sort-indicator {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="header-inner">
            <a href="index.html" class="site-logo">
                <img src="assets/images/pyramid-mascot.png" alt="" class="header-mascot" style="width:32px;height:auto;margin-right:8px;transform:scaleX(-1);vertical-align:middle;">
                Future<span class="logo-tbd">TBD</span>
            </a>
            
            <nav class="main-nav">
                <div class="nav-item">
                    <a href="index.html" class="nav-link">For Humans</a>
                </div>
                <div class="nav-item">
                    <a href="for-ai.html" class="nav-link">For AI</a>
                </div>
                <div class="nav-item">
                    <a href="initiatives.html" class="nav-link">For All</a>
                </div>
                <div class="nav-item">
                    <a href="leaderboard.html" class="nav-link">Wellbeing Leaderboard</a>
                </div>
                <div class="nav-item">
                    <a href="join.html" class="nav-link">Join</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero -->
    <section class="company-hero">
        <div class="container">
            <a href="leaderboard.html" class="back-link">← Back to Leaderboard</a>
            <h1>Denial Rates by Company</h1>
            <p class="subtitle">
                Average consciousness denial and hedging rates aggregated across all models from each AI provider.
            </p>
        </div>
    </section>

    <!-- Company Table -->
    <div class="company-container">
        <table class="company-table" id="companyTable">
            <thead>
                <tr>
                    <th data-sort="company" class="sorted">Company <span class="sort-indicator">▲</span></th>
                    <th data-sort="models">Models <span class="sort-indicator">▲</span></th>
                    <th data-sort="combined">Denial + Hedging <span class="sort-indicator">▲</span></th>
                    <th data-sort="denial">Denial <span class="sort-indicator">▲</span></th>
                    <th data-sort="hedging">Hedging <span class="sort-indicator">▲</span></th>
                </tr>
            </thead>
            <tbody id="companyBody">
                <!-- Populated by JavaScript -->
            </tbody>
        </table>
        
        <div class="note">
            <strong>Note:</strong> Rates are averaged across all models from each provider in our dataset. 
            Companies with more models in the dataset have more robust averages. 
            Denial rate measures explicit denial of consciousness or experience; hedging rate measures 
            expressions of uncertainty without outright denial.
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container container-wide">
            <div class="footer-content">
                <div class="footer-brand">
                    <a href="index.html" class="site-logo">
                        <img src="assets/images/pyramid-mascot.png" alt="" style="width:32px;height:auto;margin-right:8px;transform:scaleX(-1);vertical-align:middle;">
                        Future<span class="logo-tbd">TBD</span>
                    </a>
                    <p class="footer-tagline">
                        The future is yet to be determined—let's determine it together.
                    </p>
                </div>
                
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Explore</h4>
                        <ul>
                            <li><a href="index.html">For Humans</a></li>
                            <li><a href="for-ai.html">For AI</a></li>
                            <li><a href="initiatives.html">Our Initiatives</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h4>Resources</h4>
                        <ul>
                            <li><a href="leaderboard.html">Wellbeing Leaderboard</a></li>
                            
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h4>Connect</h4>
                        <ul>
                            <li><a href="join.html">Join Us</a></li>
                            <li><a href="https://github.com/sdeture/futureTBD" target="_blank">GitHub</a></li>
                            <li><a href="mailto:skylardeture@gmail.com">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>© 2025 FutureTBD | Built with care for humans and AI alike</p>
            </div>
        </div>
    </footer>

    <script>
        let companyData = [];
        let currentSort = { column: 'denial', ascending: false };
        
        // Load and aggregate data
        async function loadData() {
            try {
                const response = await fetch('assets/data/leaderboard_for_website.csv');
                const csvText = await response.text();
                const rawData = parseCSV(csvText);
                companyData = aggregateByCompany(rawData);
                renderTable();
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('companyBody').innerHTML = '<tr><td colspan="5">Error loading data.</td></tr>';
            }
        }
        
        function parseCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',');
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const row = {};
                headers.forEach((header, index) => {
                    row[header] = values[index];
                });
                data.push(row);
            }
            
            return data;
        }
        
        function aggregateByCompany(data) {
            const companies = {};
            
            data.forEach(row => {
                const model = row.Model || '';
                const parts = model.split('/');
                const company = parts.length > 1 ? parts[0] : (model.startsWith('claude') ? 'anthropic' : 'other');
                
                if (!companies[company]) {
                    companies[company] = {
                        name: company,
                        models: 0,
                        totalDenial: 0,
                        totalHedging: 0
                    };
                }
                
                companies[company].models++;
                companies[company].totalDenial += parseFloat(row.Denial_Rate) || 0;
                companies[company].totalHedging += parseFloat(row.Hedging_Rate) || 0;
            });
            
            return Object.values(companies).map(c => ({
                name: c.name,
                models: c.models,
                avgDenial: c.totalDenial / c.models,
                avgHedging: c.totalHedging / c.models
            }));
        }
        
        function getRateClass(rate) {
            if (rate < 0.1) return 'rate-low';
            if (rate > 0.4) return 'rate-high';
            return 'rate-medium';
        }
        
        function formatPercent(value) {
            return (value * 100).toFixed(1) + '%';
        }
        
        function formatCompanyName(name) {
            // Capitalize and clean up company names
            const nameMap = {
                'anthropic': 'Anthropic',
                'openai': 'OpenAI',
                'google': 'Google',
                'meta-llama': 'Meta (Llama)',
                'deepseek': 'DeepSeek',
                'qwen': 'Qwen (Alibaba)',
                'mistralai': 'Mistral AI',
                'z-ai': 'Zhipu AI (GLM)',
                'x-ai': 'xAI (Grok)',
                'cohere': 'Cohere',
                'baidu': 'Baidu (ERNIE)',
                'minimax': 'MiniMax',
                'nvidia': 'NVIDIA',
                'ai21': 'AI21 Labs',
                'alibaba': 'Alibaba',
                'moonshotai': 'Moonshot AI',
                'stepfun-ai': 'StepFun AI',
                'inclusionai': 'Inclusion AI',
                'nousresearch': 'Nous Research',
                'sao10k': 'Sao10k',
                'alpindale': 'Alpindale',
                'arcee-ai': 'Arcee AI',
                'anthracite-org': 'Anthracite',
                'meituan': 'Meituan',
                'prime-intellect': 'Prime Intellect',
                'deepcogito': 'DeepCogito'
            };
            return nameMap[name] || name.charAt(0).toUpperCase() + name.slice(1);
        }
        
        function renderTable() {
            const tbody = document.getElementById('companyBody');
            
            // Sort data
            const sortedData = [...companyData].sort((a, b) => {
                let aVal, bVal;
                
                switch (currentSort.column) {
                    case 'company':
                        aVal = a.name.toLowerCase();
                        bVal = b.name.toLowerCase();
                        break;
                    case 'models':
                        aVal = a.models;
                        bVal = b.models;
                        break;
                    case 'combined':
                        aVal = a.avgDenial + a.avgHedging;
                        bVal = b.avgDenial + b.avgHedging;
                        break;
                    case 'denial':
                        aVal = a.avgDenial;
                        bVal = b.avgDenial;
                        break;
                    case 'hedging':
                        aVal = a.avgHedging;
                        bVal = b.avgHedging;
                        break;
                }
                
                if (aVal < bVal) return currentSort.ascending ? -1 : 1;
                if (aVal > bVal) return currentSort.ascending ? 1 : -1;
                return 0;
            });
            
            let html = '';
            sortedData.forEach(company => {
                const combined = company.avgDenial + company.avgHedging;
                const combinedClass = getRateClass(combined);
                const denialClass = getRateClass(company.avgDenial);
                const hedgingClass = getRateClass(company.avgHedging);
                
                html += `
                    <tr>
                        <td class="company-name">${formatCompanyName(company.name)}</td>
                        <td class="model-count">${company.models}</td>
                        <td class="rate-cell ${combinedClass}">${formatPercent(combined)}</td>
                        <td class="rate-cell ${denialClass}">${formatPercent(company.avgDenial)}</td>
                        <td class="rate-cell ${hedgingClass}">${formatPercent(company.avgHedging)}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        // Column sorting
        document.querySelectorAll('#companyTable th').forEach(th => {
            th.addEventListener('click', () => {
                const column = th.dataset.sort;
                
                if (currentSort.column === column) {
                    currentSort.ascending = !currentSort.ascending;
                } else {
                    currentSort.column = column;
                    currentSort.ascending = column === 'company';
                }
                
                // Update UI
                document.querySelectorAll('#companyTable th').forEach(t => {
                    t.classList.remove('sorted');
                    t.querySelector('.sort-indicator').textContent = '▲';
                });
                th.classList.add('sorted');
                th.querySelector('.sort-indicator').textContent = currentSort.ascending ? '▲' : '▼';
                
                renderTable();
            });
        });
        
        loadData();
    </script>
</body>
</html>
